{
  "id": "snapshot_1764838470333_zxpve9ce8",
  "approvalId": "approval_1764838445914_dqq6r1fv2",
  "approvalTitle": "Project Structure - Directory & Code Organization",
  "version": 2,
  "timestamp": "2025-12-04T08:54:30.333Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Project Structure\r\n\r\n## Directory Organization\r\n\r\n```\r\nangular-web-app/\r\nâ”œâ”€â”€ src/\r\nâ”‚   â”œâ”€â”€ app/\r\nâ”‚   â”‚   â”œâ”€â”€ core/                    # ðŸ”’ Singleton Layer\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ auth/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.guard.ts\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth.interceptor.ts\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ layout/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ header/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar/\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ footer/\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ config/\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ app.config.ts\r\nâ”‚   â”‚   â”‚   â””â”€â”€ store/               # Global state (if needed)\r\nâ”‚   â”‚   â”‚\r\nâ”‚   â”‚   â”œâ”€â”€ shared/                  # ðŸ”„ Reusable Layer\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ ui/                  # Dumb/Presentational components\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ button/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ card/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ modal/\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ table/\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ pipes/\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ directives/\r\nâ”‚   â”‚   â”‚   â””â”€â”€ utils/\r\nâ”‚   â”‚   â”‚\r\nâ”‚   â”‚   â”œâ”€â”€ features/                # ðŸ“¦ Business Layer (Lazy-loaded)\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard.routes.ts\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard.component.ts\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ ui/              # Feature-specific components\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ users/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users.routes.ts\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-list.component.ts\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-detail.component.ts\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ user.service.ts\r\nâ”‚   â”‚   â”‚   â””â”€â”€ settings/\r\nâ”‚   â”‚   â”‚\r\nâ”‚   â”‚   â”œâ”€â”€ app.component.ts\r\nâ”‚   â”‚   â”œâ”€â”€ app.config.ts\r\nâ”‚   â”‚   â””â”€â”€ app.routes.ts\r\nâ”‚   â”‚\r\nâ”‚   â”œâ”€â”€ assets/\r\nâ”‚   â”œâ”€â”€ styles/\r\nâ”‚   â””â”€â”€ index.html\r\nâ”‚\r\nâ”œâ”€â”€ docs/                            # Knowledge base\r\nâ”œâ”€â”€ .spec-workflow/                  # Spec-driven development\r\nâ”‚   â”œâ”€â”€ steering/\r\nâ”‚   â”œâ”€â”€ specs/\r\nâ”‚   â””â”€â”€ templates/\r\nâ””â”€â”€ package.json\r\n```\r\n\r\n---\r\n\r\n## Naming Conventions\r\n\r\n### Files\r\n\r\n| Type | Pattern | Example |\r\n|------|---------|---------|\r\n| **Component** | `kebab-case.component.ts` | `user-card.component.ts` |\r\n| **Service** | `kebab-case.service.ts` | `user.service.ts` |\r\n| **Guard** | `kebab-case.guard.ts` | `auth.guard.ts` |\r\n| **Interceptor** | `kebab-case.interceptor.ts` | `auth.interceptor.ts` |\r\n| **Pipe** | `kebab-case.pipe.ts` | `date-format.pipe.ts` |\r\n| **Directive** | `kebab-case.directive.ts` | `highlight.directive.ts` |\r\n| **Routes** | `kebab-case.routes.ts` | `users.routes.ts` |\r\n| **Harness** | `kebab-case.harness.ts` | `user-card.harness.ts` |\r\n| **Spec** | `kebab-case.spec.ts` | `user.service.spec.ts` |\r\n\r\n### Code\r\n\r\n| Type | Pattern | Example |\r\n|------|---------|---------|\r\n| **Classes** | `PascalCase` | `UserCardComponent` |\r\n| **Interfaces** | `PascalCase` | `User`, `UserForm` |\r\n| **Functions** | `camelCase` | `calculateTotal()` |\r\n| **Signals** | `camelCase` | `users`, `isLoading` |\r\n| **Constants** | `UPPER_SNAKE_CASE` | `API_URL`, `MAX_RETRIES` |\r\n| **Selectors** | `app-kebab-case` | `app-user-card` |\r\n\r\n---\r\n\r\n## Import Patterns\r\n\r\n### Import Order (Enforced)\r\n\r\n```typescript\r\n// 1. Angular core\r\nimport { Component, inject, signal } from '@angular/core';\r\n\r\n// 2. Angular modules\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n// 3. Third-party libraries\r\nimport { ButtonModule } from 'primeng/button';\r\n\r\n// 4. Core layer\r\nimport { AuthService } from '@core/auth/auth.service';\r\n\r\n// 5. Shared layer\r\nimport { CardComponent } from '@shared/ui/card/card.component';\r\n\r\n// 6. Feature-local (relative)\r\nimport { UserService } from './user.service';\r\n```\r\n\r\n### Path Aliases (tsconfig.json)\r\n\r\n```json\r\n{\r\n  \"compilerOptions\": {\r\n    \"paths\": {\r\n      \"@core/*\": [\"src/app/core/*\"],\r\n      \"@shared/*\": [\"src/app/shared/*\"],\r\n      \"@features/*\": [\"src/app/features/*\"]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n---\r\n\r\n## Code Structure Patterns\r\n\r\n### Component File Structure\r\n\r\n```typescript\r\n// 1. Imports\r\nimport { Component, ChangeDetectionStrategy, inject, input, output, signal, computed } from '@angular/core';\r\n\r\n// 2. Component metadata\r\n@Component({\r\n  selector: 'app-user-card',\r\n  standalone: true,\r\n  imports: [/* dependencies */],\r\n  templateUrl: './user-card.component.html',\r\n  styleUrl: './user-card.component.scss',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  host: {\r\n    'role': 'article',\r\n    '[class.selected]': 'isSelected()'\r\n  }\r\n})\r\nexport class UserCardComponent {\r\n  // 3. Dependency Injection\r\n  private userService = inject(UserService);\r\n\r\n  // 4. Inputs\r\n  user = input.required<User>();\r\n  showActions = input(true);\r\n\r\n  // 5. Outputs\r\n  delete = output<string>();\r\n  edit = output<User>();\r\n\r\n  // 6. Queries\r\n  avatar = viewChild<ElementRef>('avatar');\r\n\r\n  // 7. Internal State (Signals)\r\n  isSelected = signal(false);\r\n\r\n  // 8. Computed/Derived State\r\n  fullName = computed(() => \r\n    `${this.user().firstName} ${this.user().lastName}`\r\n  );\r\n\r\n  // 9. Lifecycle (if needed)\r\n  constructor() {\r\n    afterNextRender(() => {\r\n      // DOM-dependent initialization\r\n    });\r\n  }\r\n\r\n  // 10. Public Methods (for template)\r\n  onDelete() {\r\n    this.delete.emit(this.user().id);\r\n  }\r\n\r\n  // 11. Private Methods\r\n  private validate() { /* ... */ }\r\n}\r\n```\r\n\r\n### Service File Structure\r\n\r\n```typescript\r\n// 1. Imports\r\nimport { Injectable, inject, signal } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { BehaviorSubject, switchMap, shareReplay } from 'rxjs';\r\n\r\n// 2. Injectable decorator\r\n@Injectable({ providedIn: 'root' })\r\nexport class UserService {\r\n  // 3. Dependency Injection\r\n  private http = inject(HttpClient);\r\n\r\n  // 4. Private RxJS Subjects (triggers)\r\n  private refresh$ = new BehaviorSubject<void>(void 0);\r\n  private searchTerm$ = new BehaviorSubject<string>('');\r\n\r\n  // 5. Private RxJS Streams (processing)\r\n  private usersStream$ = this.refresh$.pipe(\r\n    switchMap(() => this.http.get<User[]>('/api/users')),\r\n    shareReplay(1)\r\n  );\r\n\r\n  // 6. Public Signals (exposed to components)\r\n  readonly users = toSignal(this.usersStream$, { initialValue: [] });\r\n  readonly isLoading = signal(false);\r\n  readonly error = signal<string | null>(null);\r\n\r\n  // 7. Computed Signals\r\n  readonly activeUsers = computed(() => \r\n    this.users().filter(u => u.isActive)\r\n  );\r\n\r\n  // 8. Public Methods (actions)\r\n  refresh() {\r\n    this.refresh$.next();\r\n  }\r\n\r\n  search(term: string) {\r\n    this.searchTerm$.next(term);\r\n  }\r\n\r\n  // 9. Private Methods\r\n  private handleError(err: any) { /* ... */ }\r\n}\r\n```\r\n\r\n---\r\n\r\n## Module Boundaries\r\n\r\n### Dependency Rules\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                         FEATURES                            â”‚\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚\r\nâ”‚  â”‚Dashboardâ”‚  â”‚  Users  â”‚  â”‚Settings â”‚  â† Lazy-loaded      â”‚\r\nâ”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚\r\nâ”‚       â”‚            â”‚            â”‚                           â”‚\r\nâ”‚       â”‚    âŒ No cross-feature imports                      â”‚\r\nâ”‚       â”‚            â”‚            â”‚                           â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n        â”‚            â”‚            â”‚\r\n        â–¼            â–¼            â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                         SHARED                              â”‚\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚\r\nâ”‚  â”‚   UI   â”‚  â”‚ Pipes  â”‚  â”‚Directivâ”‚  â”‚ Utils  â”‚            â”‚\r\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚\r\nâ”‚                                                             â”‚\r\nâ”‚  âš ï¸ No business logic | No Core service injection          â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n        â”‚\r\n        â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                          CORE                               â”‚\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚\r\nâ”‚  â”‚  Auth  â”‚  â”‚ Layout â”‚  â”‚ Config â”‚  â”‚ Store  â”‚            â”‚\r\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚\r\nâ”‚                                                             â”‚\r\nâ”‚  ðŸ”’ Singleton services | Global state | App shell          â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\n### Allowed Imports Matrix\r\n\r\n| From â†“ / To â†’ | Core | Shared | Features |\r\n|---------------|------|--------|----------|\r\n| **Core** | âœ… | âœ… | âŒ |\r\n| **Shared** | âŒ | âœ… | âŒ |\r\n| **Features** | âœ… | âœ… | âŒ (same feature only) |\r\n\r\n---\r\n\r\n## Code Size Guidelines\r\n\r\n| Metric | Limit | Action if Exceeded |\r\n|--------|-------|-------------------|\r\n| **File size** | 300 lines | Split into smaller units |\r\n| **Function size** | 30 lines | Extract helper functions |\r\n| **Component template** | 100 lines | Extract child components |\r\n| **Nesting depth** | 3 levels | Flatten with early returns |\r\n| **Imports per file** | 15 | Consider splitting |\r\n\r\n---\r\n\r\n## Route Configuration Pattern\r\n\r\n### Feature Routes\r\n\r\n```typescript\r\n// features/users/users.routes.ts\r\nexport const USERS_ROUTES: Routes = [\r\n  {\r\n    path: '',\r\n    component: UserListComponent,\r\n    title: 'Users',\r\n    data: { animation: 'UsersPage' }\r\n  },\r\n  {\r\n    path: ':id',\r\n    loadComponent: () => import('./user-detail.component')\r\n      .then(m => m.UserDetailComponent),\r\n    title: resolveUserTitle,\r\n    canActivate: [authGuard]\r\n  }\r\n];\r\n```\r\n\r\n### App Routes (Lazy Loading)\r\n\r\n```typescript\r\n// app.routes.ts\r\nexport const routes: Routes = [\r\n  { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\r\n  {\r\n    path: 'dashboard',\r\n    loadChildren: () => import('./features/dashboard/dashboard.routes')\r\n      .then(m => m.DASHBOARD_ROUTES)\r\n  },\r\n  {\r\n    path: 'users',\r\n    loadChildren: () => import('./features/users/users.routes')\r\n      .then(m => m.USERS_ROUTES),\r\n    canMatch: [authGuard]\r\n  },\r\n  { path: '**', redirectTo: '/dashboard' }\r\n];\r\n```\r\n\r\n---\r\n\r\n## Documentation Standards\r\n\r\n### Required Documentation\r\n\r\n| Artifact | Documentation |\r\n|----------|---------------|\r\n| **Public Service Methods** | JSDoc with `@param` and `@returns` |\r\n| **Complex Algorithms** | Inline comments explaining logic |\r\n| **Shared Components** | README.md with usage examples |\r\n| **Feature Modules** | README.md with business context |\r\n\r\n### JSDoc Example\r\n\r\n```typescript\r\n/**\r\n * Fetches users with optional filtering.\r\n * \r\n * @param filter - Optional filter criteria\r\n * @returns Signal containing filtered user list\r\n * \r\n * @example\r\n * const users = userService.getUsers({ role: 'admin' });\r\n */\r\ngetUsers(filter?: UserFilter): Signal<User[]> {\r\n  // implementation\r\n}\r\n```\r\n",
  "fileStats": {
    "size": 12488,
    "lines": 375,
    "lastModified": "2025-12-04T08:53:57.822Z"
  },
  "comments": []
}